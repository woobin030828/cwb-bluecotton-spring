<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.bluecotton.mapper.MyPageSomMapper">

    <!--마이페이지 솜 인증 추가-->
    <insert id="insertSomCheckWithImages" parameterType="com.app.bluecotton.domain.dto.MyPageSomCheckDTO">
        <!-- 1️⃣ SOM_CHECK 먼저 삽입 -->
        INSERT INTO TBL_SOM_CHECK (
        ID, SOM_CHECK_IS_CHECKED, SOM_CHECK_CONTENT, MEMBER_ID, SOM_ID
        )
        VALUES (
        #{id}, #{somCheckIsChecked}, #{somCheckContent}, #{memberId}, #{somId}
        )

        <!-- 2️⃣ 이어서 이미지 리스트 삽입 (List 반복 처리) -->
        <foreach collection="somCheckImageList" item="image">
            INSERT INTO TBL_SOM_CHECK_IMAGE (
            ID, SOM_CHECK_IMAGE_PATH, SOM_CHECK_IMAGE_NAME, SOM_CHECK_ID
            )
            VALUES (
            #{image.id}, #{image.somCheckImagePath}, #{image.somCheckImageName}, #{id}
            )
        </foreach>
    </insert>

    <!--마이페이지 솜 리뷰 추가-->
    <insert id="insertSomReview" parameterType="com.app.bluecotton.domain.vo.som.SomReviewVO">
        INSERT INTO TBL_SOM_REVIEW (
        ID, SOM_REVIEW_IS_CHECKED, SOM_REVIEW_CONTENT, MEMBER_ID, SOM_ID
        ) VALUES (
        #{id}, #{somReviewIsChecked}, #{somReviewContent}, #{memberId}, #{somId}
        )
    </insert>

    <!--마이페이지 솜 인증 호출-->
    <!--마이페이지 솜 리뷰 호출-->

</mapper>
